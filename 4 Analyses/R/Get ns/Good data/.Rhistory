##Start by gathering all of the data
setwd("C:/Users/nickm/OneDrive/Documents/GitHub/BOI-Norms/4 Analyses/R/Get ns/Good data")
files = list.files(pattern = "*.csv")
#Put them in one dataframe. First apply read.csv, then rbind
dat = do.call(rbind, lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE)))
#get the number of participants
length(unique(dat$Username))
####Write a loop?####
##subset by cue, get each n?
cuelist = unique(dat$Stimuli.Cue)
dat = dat[order(dat$Stimuli.Cue), ]
temp = data.frame()
for(i in cuelist){
temp2 = subset(dat,
dat$Stimuli.Cue == i)
x = length(unique(temp2$Username))
temp3 = data.frame(i, x)
colnames(temp3)[1:2] = c("Cue", "n")
temp = rbind(temp3, temp)
}
####What about verb only?####
verb = subset(dat,
dat$POS == "VERB")
verb = verb[order(verb$Stimuli.Cue), ]
temp4 = data.frame()
for(i in cuelist){
temp5 = subset(verb,
verb$Stimuli.Cue == i)
x = length(unique(temp5$Username))
temp6 = data.frame(i, x)
colnames(temp6)[1:2] = c("Cue", "n")
temp4 = rbind(temp6, temp4)
}
colnames(temp4)[2] = "n__affordance"
combined = data.frame(cbind(temp, temp4))
combined2 = combined[ , -3]
colnames(combined2)[2] = "n_participant"
####Now get the total number of responses from each participant
temp7 = data.frame()
for(i in cuelist){
temp8 = subset(verb,
verb$Stimuli.Cue == i)
x = length(temp8$Username)
temp9 = data.frame(i, x)
colnames(temp9)[1:2] = c("Cue", "n_all")
temp7 = rbind(temp9, temp7)
}
combined3 = cbind(combined2, temp7)
combined3 = data.frame(combined3)
combined4 = combined3[ , -4]
colnames(combined4)[2:4] = c("n unique", "n unique affordance", "total affordance")
#write.csv(combined4, file = "affordance ns.csv", row.names = F)
####How many participants per source?
grouplist = unique(dat$Group)
group1 = data.frame()
for(z in grouplist){
group2 = subset(dat,
dat$Group == z)
x = length(unique(group2$Username))
group3 = data.frame(z, x)
colnames(group3)[1:2] = c("Group", "n")
group1 = rbind(group3, group1)
}
View(group1)
write.csv(combined4, file = "affordance ns.csv", row.names = F)
